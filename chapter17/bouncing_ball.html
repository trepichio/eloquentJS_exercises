<!doctype html>
<script src="../chapter17/17_canvas.js"></script>

<canvas width="400" height="400"></canvas>
<script>
  let ctx = document.querySelector("canvas").getContext("2d");

  let lastTime = null;
  function frame(time) {
    if (lastTime != null) {
      updateAnimation(Math.min(100, time - lastTime) / 1000);
    }
    lastTime = time;
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);

  let x = 100, y = 300;
  let radius = 10;
  let speedX = 100;
  let speedY = 60;

  function updateAnimation(step) {
    // Your code here.
    ctx.clearRect(0, 0, 400, 400);
    ctx.strokeStyle = "blue";
    ctx.lineWidth = "4";
    ctx.strokeRect(25, 25, 350, 350);
    x += step * speedX;
    y += step * speedY;
    if (x < 25 + radius || x > 375 - radius) { speedX = -speedX; }
    if (y < 25 + radius || y > 375 - radius) { speedY = -speedY; }
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, 7);
    ctx.fill();
  }
</script>